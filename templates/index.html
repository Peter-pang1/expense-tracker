{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">ðŸ“Š Dashboard</h2>

<div class="row">
  <div class="col-md-6 mb-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸•à¸²à¸¡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ</h5>
        <canvas id="categoryChart"></canvas>
      </div>
    </div>
  </div>
  <div class="col-md-6 mb-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™</h5>
        <canvas id="monthChart"></canvas>
      </div>
    </div>
  </div>
</div>

<script>
const categoryData = {{ category_summary|tojson }};
const monthData = {{ month_summary|tojson }};

new Chart(document.getElementById('categoryChart'), {
    type: 'pie',
    data: {
        labels: categoryData.map(c => c.category),
        datasets: [{
            data: categoryData.map(c => c.total),
            backgroundColor: ['#FF6384','#36A2EB','#FFCE56','#4CAF50','#FF9800']
        }]
    }
});

new Chart(document.getElementById('monthChart'), {
    type: 'bar',
    data: {
        labels: monthData.map(m => m.month),
        datasets: [{
            label: "à¸¢à¸­à¸”à¸£à¸§à¸¡ (à¸šà¸²à¸—)",
            data: monthData.map(m => m.total),
            backgroundColor: '#36A2EB'
        }]
    },
    options: {
        responsive: true,
        plugins: { legend: { display: false } }
    }
});
</script>
{% endblock %}